epics:
  - title: VS Code拡張でYAML形式ストーリーのスニペット
    description: |
      このエピックは、VS Code拡張としてYAML形式ストーリーのスニペットを提供し、ユーザーがYAML形式でストーリーを簡単に作成できるようにすることを目的とする。
    stories:
      - title: YAMLスニペットの提供
        as: ユーザー
        i want: VS CodeのYAMLエディタで各種要素（エピック、ストーリー、タスク、サブタスク）のスニペットを利用したい
        so that: 迅速にYAML形式の構造化ストーリーを作成できるように
        status: Done
        definition of done:
          - ユーザーはYAMLファイルの編集中にスニペット候補を呼び出せる（例 Ctrl + Space による補完）
          - 各スニペットは以下の種類に対応している
            - エピック
            - ストーリー
            - タスク
            - サブタスク
          - スニペットはTabキーでフィールド間を移動できるように設定されている
          - スニペット定義は `YAML` 言語に対して有効である
          - 拡張機能のREADMEに使用方法が記載されている

  - title: VS Code拡張でのYAML形式ストーリーのプレビュー
    description: |
      YAML形式のストーリーをVS Code上で視覚的にプレビュー・編集する機能。
    stories:
      - title: テーブル形式プレビュー
        as: ユーザー
        i want: VS CodeのWebView上でYAML形式ストーリーをテーブル形式でプレビューしたい
        so that: ストーリーの構造を表形式で確認できるように
        status: Done
        definition of done:
          - ユーザーはVS CodeのWebView上でYAML形式ストーリーのテーブル形式プレビューを確認できる
          - テーブルにはエピック、ストーリー、タスクの情報が含まれる
          - テーブルの列は Type(Epic,Story,Taskのいずれか)、title, status, points を表示する
          - 各行はストーリーのタイトルとステータスを表示する
          - ２カラム表示で左にテーブル、右にストーリーの詳細を表示する（詳細はストーリーをクリック時に表示）
          - 無効なYAML形式ストーリーの場合、エラーメッセージが表示される
          - プレビューは有効なYAML形式ストーリーのみ更新される
          - プレビューは編集内容をリアルタイムで反映する
      - title: 詳細表示
        as: ユーザー
        i want: VS CodeのWebView上でストーリーをクリックして詳細を表示したい
        so that: YAML形式ストーリーを直接参照することなく詳細を確認できるように
        status: Done
        definition of done:
          - ユーザーはVS CodeのWebView上でストーリーをクリックして詳細を表示できる
          - 詳細には説明、ステータス、ポイントなどが含まれる
          - ポップアップまたは展開セクションは簡単に閉じられる
          - テーブル表示の場合、詳細は右側のカラムに表示される
      - title: 新規アイテムの追加
        as: ユーザー
        i want: VS CodeのWebView上で新しいエピック、ストーリー、タスクを追加したい
        so that: YAML形式ストーリーを直接編集することなく、新しいアイテムを追加できるように
        status: WIP
        definition of Done:
          - ユーザーはVS CodeのWebView上で新しいエピック、ストーリー、タスクを追加できる
          - ユーザーは「新規追加」ボタンで Epic を追加できる
          - ユーザーはテーブルの Epic の行の「＋」ボタンで Story を追加できる
          - ユーザーはテーブルの Story の行の「＋」ボタンで Task を追加できる
          - 追加するアイテムの詳細はフォーム形式のUIでできる
            - フォームの共通項目
              - title、インプットボックス、必須項目
              - description、テキストエリア、改行で高さを自動調整(field-sizing content)
              - status、ドロップダウン、ToDo,WIP,Doneのいずれか
              - definition of done、テキストエリア、改行で高さを自動調整(field-sizing content)
            - story の項目
              - as, i want, so that、インプットボックス
              - points、インプットボックス、整数、初期値=0
              - sprint、インプットボックス
              - 親epic、ドロップダウン、選択可能なリスト
            - task の項目
              - 親epic、ドロップダウン、選択可能なリスト、ブランクにすることも可能。
              - 親story、ドロップダウン、選択可能なリスト、ブランクにすることも可能
              - 親epic を選択する場合、親story は選択不可（ブランクにする）
              - 親story を選択する場合、親epic は選択不可（ブランクにする）
              - 親がstoryの場合、sub task として扱う
          - 入力時にリアルタイムでバリデーションが行われ、不正な入力にはエラーメッセージが表示される
          - フォームの表示中はストーリーやエピック、タスクの詳細表示は非表示にする
          - 追加した新しいアイテムはプレビューに即時に表示する
          - 追加した新しいアイテムは story.yaml に反映するように更新する
      - title: アイテムの編集
        as: ユーザー
        i want: VS CodeのWebView上でエピック、ストーリー、タスクを編集したい
        so that: YAML形式ストーリーを直接編集することなく、素早に変更できるように
        status: ToDo
        definition of done:
          - ユーザーはVS CodeのWebView上でエピック、ストーリー、タスクを編集できる
          - 編集内容はUIとYAML形式ストーリーの両方に反映される
          - ユーザーはテーブル上のアイテムをダブルクリック、または「編集」ボタンを押すことで編集モードに切り替えられる。
          - 編集モードではテキストフィールドやセレクトボックスが表示され、保存/キャンセル操作が可能である
      - title: アイテムの削除
        as: ユーザー
        i want: VS CodeのWebView上でエピック、ストーリー、タスクを削除したい
        so that: 不要なコンテンツを視覚的に整理できるように
        status: ToDo
        definition of done:
          - ユーザーはVS CodeのWebView上でエピック、ストーリー、タスクを削除できる
          - 削除されたアイテムはUIとYAML形式ストーリーから消える
          - ユーザーはアイテムを右クリックして表示されるコンテキストメニューから「削除」を選択できる
          - Epicを削除する場合、配下のStoryやTaskも削除対象になることが明示され、確認ダイアログでユーザーの承認を求める
      - title: フィルタリング
        as: ユーザー
        i want: VS CodeのWebView上でストーリーをスプリントやステータスでフィルタリングしたい
        so that: 関心のあるストーリーだけを表示できるように
        status: ToDo
        definition of done:
          - ユーザーはステータス（ToDo、In Progress、Doneなど）でストーリーを絞り込める。チェックボックスやドロップダウンによる複数選択が可能
          - ユーザーはスプリントでストーリーを絞り込める。スプリント名一覧から選択可能
          - ユーザーはタグやラベルでストーリーを絞り込める。複数タグのAND/OR検索も検討されている
          - ユーザーはタイトルや説明に含まれるキーワードでフリーテキスト検索ができる
          - ユーザーは複数のフィルタ条件（ステータス＋スプリント＋タグなど）を組み合わせて絞り込みできる
          - UI上にフィルター専用パネルがあり、サイドバーや画面上部に設置され操作しやすい
      - title: ドラッグ＆ドロップで並べ替え
        as: ユーザー
        i want: VS CodeのWebView上でエピックやストーリーの順序をドラッグ＆ドロップで並べ替えたい
        so that: YAML形式エピックやストーリーを直接編集することなく、視覚的に変更できるように
        status: ToDo
        definition of done:
          - ユーザーはVS CodeのWebView上でストーリーをドラッグ＆ドロップで並べ替えできる
          - 並べ替えた順序はYAML形式ストーリーに反映される
          - 同一レベル（Epic同士、Story同士など）での並べ替えに対応している
          - 階層構造（Storyを別のEpicに移動など）もドラッグ＆ドロップで変更可能である
          - Shift + クリックなどで複数アイテムを選択し、まとめて移動できる
          - マウス操作で上下に移動できるドラッグハンドルが表示されている
          - 挿入位置にガイドライン（例：青線）が表示され、視覚的に位置が把握できる
          - 並べ替え後、軽微なアニメーションで移動が完了したことがわかる
          - 操作は「元に戻す」機能でキャンセルできる
          - 並べ替えはWebView UIとYAMLファイルの両方に反映される
          - YAMLファイルの `stories:` 配列順が変更を反映して更新される
